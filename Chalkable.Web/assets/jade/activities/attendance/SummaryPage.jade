mixin AbsentLatePage(data, header)
    .chart-container
        .panel-header=header
        .chart-block.relative
            .wide-chart-bg
            +Chart()(
                data-options=self.getChartOptions(data)
            )
    .students-container.relative
        items = self.getGroupedStudents(data.getStudents())
        each item,i in items
            div(class = i==0 ? "visible-block" : "hidden-students-block height-0")
                div(class = i==0 ? "" : "hidden-students").hidden-students-block-2
                    each info in item
                        .student-with-picture
                            if info
                                alerts = info.getAlerts()
                                student = info.getStudentInfo()
                                if alerts && alerts.length > 0
                                    div(data-tooltip='<div class="p7">' + alerts.join('<hr>') + '</div>').alerts
                                .chlk-pop-up-container.popup-top
                                    .pop-up-triangle
                                    .info-container
                                        h1=student.getDisplayName()
                                        .stats
                                            each stat in info.getStatByClass()
                                                p #{stat.getClassName()}: #{stat.getValue()}
                                        a(href="javascript:").grey-button=Msg.Parent_info
                                .img-container
                                    +PersonImg(student, 128)

.attendance-summary
    topData = self.getTopData();
    topItems = topData.getTopItems();
    +LeftRightToolbar(topItems, chlk.templates.classes.TopBar, 'attendance', 'classList')(
        selectedItemId=""
    ).classes-bar
    .action-bar.not-transparent.buttons
        .container.panel-bg
            .center.absent-late-buttons
                a(data-page=1).action-button.absent-late-button.absent-button.pressed=Msg.Absent
                a(data-page=2).action-button.absent-late-button.late-button=Msg.Late
    summary = self.getSummary();
    div(data-page=1).absent-late-page.absent-page
        +AbsentLatePage(summary.getAbsent(), Msg.Absent_students)
    div(data-page=2).absent-late-page.late-page
        +AbsentLatePage(summary.getLate(), Msg.Late_students)
