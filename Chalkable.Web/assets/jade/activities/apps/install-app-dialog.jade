mixin InstallItem(item)
    descr = item.getDescription()
    tooltipText = item.getTooltipHint() || ""
    withoutTooltip = tooltipText.length == 0
    if item.isInstalled()
        .labeled-checkbox
            label(class="disabled-lbl", data-tooltip=tooltipText)=descr
    else
        +LabeledCheckbox(
            item.getDescription(),
            'chk-' + item.getId(),
            item.isInstalled(),
            item.isInstalled(), tooltipText)(
            install-group="#{item.getGroupType().valueOf()}",
            noTooltip = withoutTooltip ? "true" : undefined,
            withoutOverflow="true",
            data-tooltip=tooltipText
        )

app = self.getApp()

.dialog.app-market-install
    .x-window-header
        a.close.close-btn.dark
        h1=app.getName()
    .x-window-body
        +ActionForm('appmarket', 'install')
            .install-for
                +Hidden('appId', app.getId().valueOf())
                +Hidden('classes', "")
                +Hidden('gradeLevels', "")
                +Hidden('departments', "")
                +Hidden('roles', "")
                +Hidden('currentPerson', "")

                each column in self.getInstallGroupColumns()
                    .column(style="width:" + self.getInstallGroupColumnWidth())
                        each item in column
                            +InstallItem(item)
            .install-info
                .install-btn
                    +Button(disabled = true).special-button.green-button Install App
                +PayCheck()