mixin Image()
    -attributes = self.processAttrs(attributes);
    img(attributes)

mixin PersonImg(person, size, noAlerts)
    if(person && person.getGender())
        src = chlk.templates.ChlkTemplate.prototype.getPictureURL(person.getId(), size, size)
        isWoman = person.getGender().toLowerCase() == 'f';
        alternativeHref = joinUrls(window.scriptsRoot, 'Content/avatars/' + size + '/.no-avatar') + (isWoman ? '-female' : '') + '.png';
        p = !noAlerts && person.showAlerts()
        div(style=p ? "overflow: visible" : "").avatar-wrapper
            if p
                top = self.getAlertsAttributes(person)
                div(
                    class=(size < 128 ? "small" : ""),
                    data-allowedinetaccess = person.isAllowedInetAccess(),
                    data-withmedicalalert = person.isWithMedicalAlert(),
                    data-specialinstructions = person.getSpecialInstructions(),
                    data-spedstatus = person.getSpedStatus()
                ).alerts-icon.no-tooltip
            div(attributes)(class="person-avatar-" + (isWoman ? "w" : "m") + "-" + size, style = "background-image: url(" + src + ")")

mixin ClassImg(course, width, height)
    -defaultSrc =joinUrls(window.scriptsRoot, 'Content/images/common/course-icons/all.png');
    if course && course.getDepartmentId()
        -attributes.src = chlk.templates.ChlkTemplate.prototype.getPictureURL(course.getDepartmentId(), height, width)
    else
        -attributes.src = defaultSrc;
    +Image()(attributes)
